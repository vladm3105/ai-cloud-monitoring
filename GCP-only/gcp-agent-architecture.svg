<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1100">
  <defs>
    <!-- Gradients -->
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a73e8"/>
      <stop offset="100%" style="stop-color:#4285f4"/>
    </linearGradient>
    
    <linearGradient id="mcpGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f0fe"/>
      <stop offset="100%" style="stop-color:#d2e3fc"/>
    </linearGradient>
    
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fce8e6"/>
      <stop offset="100%" style="stop-color:#fadbd8"/>
    </linearGradient>
    
    <linearGradient id="circuitBreakerGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fef7e0"/>
      <stop offset="100%" style="stop-color:#feefc3"/>
    </linearGradient>
    
    <linearGradient id="conversationalGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e6f4ea"/>
      <stop offset="100%" style="stop-color:#ceead6"/>
    </linearGradient>
    
    <!-- Drop Shadow -->
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="110%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.15"/>
    </filter>
    
    <!-- Arrow Marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5f6368"/>
    </marker>
    
    <marker id="arrowheadBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#1a73e8"/>
    </marker>
    
    <marker id="arrowheadRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ea4335"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1100" fill="#f8f9fa"/>
  
  <!-- Title -->
  <rect x="50" y="20" width="1300" height="50" rx="8" fill="url(#headerGrad)" filter="url(#shadow)"/>
  <text x="700" y="52" text-anchor="middle" fill="white" font-family="Google Sans, Arial, sans-serif" font-size="22" font-weight="500">
    GCP Cost Monitoring Agent ‚Äî Architecture
  </text>
  
  <!-- ==================== CONVERSATIONAL INTERFACE LAYER ==================== -->
  <rect x="50" y="90" width="1300" height="120" rx="12" fill="url(#conversationalGrad)" stroke="#34a853" stroke-width="2" filter="url(#shadow)"/>
  <text x="70" y="115" fill="#137333" font-family="Google Sans, Arial, sans-serif" font-size="14" font-weight="600">CONVERSATIONAL INTERFACE</text>
  
  <!-- User Icon -->
  <circle cx="130" cy="160" r="25" fill="#34a853"/>
  <circle cx="130" cy="150" r="10" fill="white"/>
  <ellipse cx="130" cy="172" rx="14" ry="8" fill="white"/>
  <text x="130" y="200" text-anchor="middle" fill="#137333" font-family="Arial" font-size="10">User</text>
  
  <!-- Query Examples -->
  <rect x="180" y="125" width="280" height="70" rx="8" fill="white" stroke="#34a853" stroke-width="1"/>
  <text x="195" y="145" fill="#202124" font-family="Arial" font-size="11">"Why did my costs spike?"</text>
  <text x="195" y="162" fill="#202124" font-family="Arial" font-size="11">"Show me idle VMs"</text>
  <text x="195" y="179" fill="#202124" font-family="Arial" font-size="11">"Set budget to $5,000"</text>
  
  <!-- Arrow from queries -->
  <line x1="470" y1="160" x2="520" y2="160" stroke="#5f6368" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Intent Classification -->
  <rect x="530" y="125" width="150" height="70" rx="8" fill="white" stroke="#34a853" stroke-width="1"/>
  <text x="605" y="150" text-anchor="middle" fill="#137333" font-family="Arial" font-size="12" font-weight="600">Intent Classification</text>
  <text x="605" y="170" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">+ Entity Extraction</text>
  <text x="605" y="185" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">+ Context Management</text>
  
  <!-- Arrow -->
  <line x1="690" y1="160" x2="740" y2="160" stroke="#5f6368" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Query Router -->
  <rect x="750" y="125" width="140" height="70" rx="8" fill="white" stroke="#34a853" stroke-width="1"/>
  <text x="820" y="155" text-anchor="middle" fill="#137333" font-family="Arial" font-size="12" font-weight="600">Query Router</text>
  <text x="820" y="175" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">‚Üí MCP Tools</text>
  
  <!-- Arrow -->
  <line x1="900" y1="160" x2="950" y2="160" stroke="#5f6368" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Response Generator -->
  <rect x="960" y="125" width="160" height="70" rx="8" fill="white" stroke="#34a853" stroke-width="1"/>
  <text x="1040" y="150" text-anchor="middle" fill="#137333" font-family="Arial" font-size="12" font-weight="600">Response Generator</text>
  <text x="1040" y="170" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">Natural Language</text>
  <text x="1040" y="185" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">+ Suggested Actions</text>
  
  <!-- Response bubble -->
  <rect x="1150" y="125" width="180" height="70" rx="8" fill="#e6f4ea" stroke="#34a853" stroke-width="1"/>
  <text x="1240" y="145" text-anchor="middle" fill="#137333" font-family="Arial" font-size="10">üìä Cost Summary</text>
  <text x="1240" y="162" text-anchor="middle" fill="#202124" font-family="Arial" font-size="10">Total: $2,345.67</text>
  <text x="1240" y="179" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">[Breakdown] [Compare] [Save]</text>
  
  <!-- ==================== MCP SERVER LAYER ==================== -->
  <rect x="50" y="230" width="1300" height="320" rx="12" fill="url(#mcpGrad)" stroke="#1a73e8" stroke-width="2" filter="url(#shadow)"/>
  <text x="70" y="255" fill="#1967d2" font-family="Google Sans, Arial, sans-serif" font-size="14" font-weight="600">MCP SERVER LAYER (Port 8084)</text>
  
  <!-- Row 1: Main Components -->
  
  <!-- Organization Scanner -->
  <rect x="70" y="275" width="190" height="120" rx="8" fill="white" stroke="#1a73e8" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="70" y="275" width="190" height="28" rx="8" fill="#1a73e8"/>
  <text x="165" y="294" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Organization Scanner</text>
  <text x="80" y="320" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Hierarchy Discovery</text>
  <text x="80" y="336" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Project Enumeration</text>
  <text x="80" y="352" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Service Detection</text>
  <text x="80" y="368" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ High-Cost Flagging</text>
  <circle cx="240" cy="335" r="15" fill="#e8f0fe" stroke="#1a73e8"/>
  <text x="240" y="340" text-anchor="middle" fill="#1a73e8" font-family="Arial" font-size="14">üîç</text>
  
  <!-- Circuit Breaker -->
  <rect x="280" y="275" width="190" height="120" rx="8" fill="white" stroke="#ea4335" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="280" y="275" width="190" height="28" rx="8" fill="#ea4335"/>
  <text x="375" y="294" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Circuit Breaker</text>
  <text x="290" y="320" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Multi-Threshold Config</text>
  <text x="290" y="336" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Auto Stop Resources</text>
  <text x="290" y="352" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Cooldown Periods</text>
  <text x="290" y="368" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Manual Override</text>
  <circle cx="450" cy="335" r="15" fill="#fce8e6" stroke="#ea4335"/>
  <text x="450" y="340" text-anchor="middle" fill="#ea4335" font-family="Arial" font-size="14">‚ö°</text>
  
  <!-- Budget Monitor -->
  <rect x="490" y="275" width="190" height="120" rx="8" fill="white" stroke="#fbbc04" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="490" y="275" width="190" height="28" rx="8" fill="#fbbc04"/>
  <text x="585" y="294" text-anchor="middle" fill="#202124" font-family="Arial" font-size="12" font-weight="600">Budget Monitor</text>
  <text x="500" y="320" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Multi-Threshold Alerts</text>
  <text x="500" y="336" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Forecasted Spend</text>
  <text x="500" y="352" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Pub/Sub Notifications</text>
  <text x="500" y="368" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Service/Label Budgets</text>
  <circle cx="660" cy="335" r="15" fill="#fef7e0" stroke="#fbbc04"/>
  <text x="660" y="340" text-anchor="middle" fill="#f9a825" font-family="Arial" font-size="14">üí∞</text>
  
  <!-- Anomaly Detector -->
  <rect x="700" y="275" width="190" height="120" rx="8" fill="white" stroke="#9334e6" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="700" y="275" width="190" height="28" rx="8" fill="#9334e6"/>
  <text x="795" y="294" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Anomaly Detector</text>
  <text x="710" y="320" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Statistical Analysis</text>
  <text x="710" y="336" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Daily/Service Spikes</text>
  <text x="710" y="352" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Sustained Increases</text>
  <text x="710" y="368" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ 2œÉ Threshold Detection</text>
  <circle cx="870" cy="335" r="15" fill="#f3e8fd" stroke="#9334e6"/>
  <text x="870" y="340" text-anchor="middle" fill="#9334e6" font-family="Arial" font-size="14">üìà</text>
  
  <!-- Row 2: Secondary Components -->
  
  <!-- Real-time Tracker -->
  <rect x="70" y="410" width="190" height="120" rx="8" fill="white" stroke="#00897b" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="70" y="410" width="190" height="28" rx="8" fill="#00897b"/>
  <text x="165" y="429" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Real-time Tracker</text>
  <text x="80" y="455" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Asset Inventory Feed</text>
  <text x="80" y="471" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Pub/Sub Events</text>
  <text x="80" y="487" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Cost Estimation</text>
  <text x="80" y="503" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Risk Assessment</text>
  <circle cx="240" cy="470" r="15" fill="#e0f2f1" stroke="#00897b"/>
  <text x="240" y="475" text-anchor="middle" fill="#00897b" font-family="Arial" font-size="14">üîî</text>
  
  <!-- ML Recommender -->
  <rect x="280" y="410" width="190" height="120" rx="8" fill="white" stroke="#0d47a1" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="280" y="410" width="190" height="28" rx="8" fill="#0d47a1"/>
  <text x="375" y="429" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">ML Recommender</text>
  <text x="290" y="455" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Idle VM Detection</text>
  <text x="290" y="471" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Rightsizing Suggestions</text>
  <text x="290" y="487" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ CUD Opportunities</text>
  <text x="290" y="503" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Auto-Implementation</text>
  <circle cx="450" cy="470" r="15" fill="#e3f2fd" stroke="#0d47a1"/>
  <text x="450" y="475" text-anchor="middle" fill="#0d47a1" font-family="Arial" font-size="14">ü§ñ</text>
  
  <!-- Billing Collector -->
  <rect x="490" y="410" width="190" height="120" rx="8" fill="white" stroke="#607d8b" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="490" y="410" width="190" height="28" rx="8" fill="#607d8b"/>
  <text x="585" y="429" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Billing Collector</text>
  <text x="500" y="455" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ BigQuery Export</text>
  <text x="500" y="471" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Daily Aggregation</text>
  <text x="500" y="487" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Service Breakdown</text>
  <text x="500" y="503" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Historical Trends</text>
  <circle cx="660" cy="470" r="15" fill="#eceff1" stroke="#607d8b"/>
  <text x="660" y="475" text-anchor="middle" fill="#607d8b" font-family="Arial" font-size="14">üìä</text>
  
  <!-- Resource Manager -->
  <rect x="700" y="410" width="190" height="120" rx="8" fill="white" stroke="#c62828" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="700" y="410" width="190" height="28" rx="8" fill="#c62828"/>
  <text x="795" y="429" text-anchor="middle" fill="white" font-family="Arial" font-size="12" font-weight="600">Resource Manager</text>
  <text x="710" y="455" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Stop/Start VMs</text>
  <text x="710" y="471" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Scale GKE Clusters</text>
  <text x="710" y="487" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Undeploy Endpoints</text>
  <text x="710" y="503" fill="#202124" font-family="Arial" font-size="10">‚Ä¢ Delete Resources</text>
  <circle cx="870" cy="470" r="15" fill="#ffebee" stroke="#c62828"/>
  <text x="870" y="475" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="14">‚öôÔ∏è</text>
  
  <!-- Circuit Breaker State Machine (side panel) -->
  <rect x="910" y="275" width="420" height="255" rx="8" fill="white" stroke="#ea4335" stroke-width="1.5" filter="url(#shadow)"/>
  <rect x="910" y="275" width="420" height="28" rx="8" fill="url(#circuitBreakerGrad)" stroke="#ea4335"/>
  <text x="1120" y="294" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="12" font-weight="600">Circuit Breaker State Machine</text>
  
  <!-- Thresholds -->
  <text x="930" y="320" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Thresholds:</text>
  <rect x="930" y="328" width="180" height="18" rx="3" fill="#e8f5e9"/>
  <text x="940" y="342" fill="#2e7d32" font-family="Arial" font-size="10">WARNING: $1,000 ‚Üí Alert</text>
  <rect x="930" y="350" width="180" height="18" rx="3" fill="#fff3e0"/>
  <text x="940" y="364" fill="#e65100" font-family="Arial" font-size="10">ELEVATED: $2,500 ‚Üí Alert</text>
  <rect x="930" y="372" width="180" height="18" rx="3" fill="#ffebee"/>
  <text x="940" y="386" fill="#c62828" font-family="Arial" font-size="10">CRITICAL: $5,000 ‚Üí Stop</text>
  <rect x="930" y="394" width="180" height="18" rx="3" fill="#b71c1c"/>
  <text x="940" y="408" fill="white" font-family="Arial" font-size="10">EMERGENCY: $10K ‚Üí Disable</text>
  
  <!-- State Machine Diagram -->
  <circle cx="1180" cy="360" r="30" fill="#e8f5e9" stroke="#34a853" stroke-width="2"/>
  <text x="1180" y="355" text-anchor="middle" fill="#137333" font-family="Arial" font-size="10" font-weight="600">CLOSED</text>
  <text x="1180" y="368" text-anchor="middle" fill="#137333" font-family="Arial" font-size="8">(normal)</text>
  
  <circle cx="1280" cy="360" r="30" fill="#ffebee" stroke="#ea4335" stroke-width="2"/>
  <text x="1280" y="355" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="10" font-weight="600">OPEN</text>
  <text x="1280" y="368" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="8">(tripped)</text>
  
  <circle cx="1230" cy="440" r="25" fill="#fff3e0" stroke="#fbbc04" stroke-width="2"/>
  <text x="1230" y="435" text-anchor="middle" fill="#e65100" font-family="Arial" font-size="9" font-weight="600">HALF</text>
  <text x="1230" y="448" text-anchor="middle" fill="#e65100" font-family="Arial" font-size="9" font-weight="600">OPEN</text>
  
  <!-- State transitions -->
  <path d="M 1210 360 L 1250 360" stroke="#5f6368" stroke-width="1.5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="1230" y="350" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="8">trip</text>
  
  <path d="M 1265 385 Q 1250 420 1245 415" stroke="#5f6368" stroke-width="1.5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="1275" y="410" fill="#5f6368" font-family="Arial" font-size="8">cooldown</text>
  
  <path d="M 1210 430 Q 1180 400 1180 390" stroke="#5f6368" stroke-width="1.5" marker-end="url(#arrowhead)" fill="none"/>
  <text x="1170" y="420" fill="#5f6368" font-family="Arial" font-size="8">reset</text>
  
  <!-- Actions -->
  <text x="930" y="445" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Actions:</text>
  <text x="930" y="465" fill="#5f6368" font-family="Arial" font-size="10">‚Ä¢ Send alerts (Slack, Email, PagerDuty)</text>
  <text x="930" y="480" fill="#5f6368" font-family="Arial" font-size="10">‚Ä¢ Stop VMs, Vertex endpoints, Dataflow</text>
  <text x="930" y="495" fill="#5f6368" font-family="Arial" font-size="10">‚Ä¢ Scale GKE to 0 nodes</text>
  <text x="930" y="510" fill="#5f6368" font-family="Arial" font-size="10">‚Ä¢ Disable billing (emergency only)</text>
  
  <!-- ==================== GCP API LAYER ==================== -->
  <rect x="50" y="570" width="1300" height="180" rx="12" fill="url(#apiGrad)" stroke="#ea4335" stroke-width="2" filter="url(#shadow)"/>
  <text x="70" y="595" fill="#c62828" font-family="Google Sans, Arial, sans-serif" font-size="14" font-weight="600">GCP API LAYER</text>
  
  <!-- API boxes - Row 1 -->
  <rect x="70" y="610" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="142" y="635" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Resource Manager</text>
  <text x="142" y="655" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">API v3</text>
  
  <rect x="230" y="610" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="302" y="635" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Service Usage</text>
  <text x="302" y="655" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">API</text>
  
  <rect x="390" y="610" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="462" y="635" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Budget API</text>
  <text x="462" y="655" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">Billing Budgets</text>
  
  <rect x="550" y="610" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="622" y="635" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Cloud Asset</text>
  <text x="622" y="655" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">Inventory</text>
  
  <rect x="710" y="610" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="782" y="635" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Recommender</text>
  <text x="782" y="655" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">API</text>
  
  <!-- API boxes - Row 2 -->
  <rect x="70" y="680" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="142" y="705" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Billing API</text>
  <text x="142" y="725" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">Cloud Billing</text>
  
  <rect x="230" y="680" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="302" y="705" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Compute Engine</text>
  <text x="302" y="725" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">API</text>
  
  <rect x="390" y="680" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="462" y="705" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Pub/Sub</text>
  <text x="462" y="725" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">Notifications</text>
  
  <rect x="550" y="680" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="622" y="705" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">BigQuery</text>
  <text x="622" y="725" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">Billing Export</text>
  
  <rect x="710" y="680" width="145" height="60" rx="6" fill="white" stroke="#ea4335" stroke-width="1"/>
  <text x="782" y="705" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="11" font-weight="600">Vertex AI</text>
  <text x="782" y="725" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="9">API</text>
  
  <!-- GCP Cloud Icon -->
  <g transform="translate(920, 610)">
    <rect width="400" height="130" rx="8" fill="white" stroke="#4285f4" stroke-width="1.5"/>
    <text x="200" y="25" text-anchor="middle" fill="#4285f4" font-family="Arial" font-size="12" font-weight="600">Google Cloud Platform</text>
    
    <!-- Cloud shape -->
    <ellipse cx="200" cy="75" rx="80" ry="35" fill="#e8f0fe" stroke="#4285f4" stroke-width="1"/>
    <ellipse cx="160" cy="70" rx="40" ry="25" fill="#e8f0fe" stroke="#4285f4" stroke-width="1"/>
    <ellipse cx="240" cy="70" rx="40" ry="25" fill="#e8f0fe" stroke="#4285f4" stroke-width="1"/>
    <ellipse cx="200" cy="55" rx="50" ry="25" fill="#e8f0fe" stroke="#4285f4" stroke-width="1"/>
    
    <!-- GCP text -->
    <text x="200" y="80" text-anchor="middle" fill="#1a73e8" font-family="Arial" font-size="16" font-weight="bold">GCP</text>
    
    <text x="200" y="120" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="10">Organization ‚Üí Folders ‚Üí Projects ‚Üí Resources</text>
  </g>
  
  <!-- ==================== DATA FLOW ARROWS ==================== -->
  
  <!-- From Conversational to MCP -->
  <line x1="700" y1="210" x2="700" y2="270" stroke="#1a73e8" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowheadBlue)"/>
  
  <!-- From MCP to API layer -->
  <line x1="165" y1="530" x2="165" y2="605" stroke="#ea4335" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  <line x1="375" y1="530" x2="375" y2="605" stroke="#ea4335" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  <line x1="585" y1="530" x2="585" y2="605" stroke="#ea4335" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  <line x1="795" y1="530" x2="795" y2="605" stroke="#ea4335" stroke-width="2" marker-end="url(#arrowheadRed)"/>
  
  <!-- ==================== LEGEND ==================== -->
  <rect x="50" y="770" width="1300" height="160" rx="12" fill="white" stroke="#dadce0" stroke-width="1" filter="url(#shadow)"/>
  <text x="70" y="795" fill="#202124" font-family="Google Sans, Arial, sans-serif" font-size="14" font-weight="600">Architecture Summary</text>
  
  <!-- Component Legend -->
  <g transform="translate(70, 810)">
    <rect width="300" height="100" rx="6" fill="#f8f9fa" stroke="#dadce0"/>
    <text x="10" y="20" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Components</text>
    
    <circle cx="25" cy="40" r="8" fill="#34a853"/>
    <text x="40" y="44" fill="#5f6368" font-family="Arial" font-size="10">Conversational Interface</text>
    
    <circle cx="25" cy="60" r="8" fill="#1a73e8"/>
    <text x="40" y="64" fill="#5f6368" font-family="Arial" font-size="10">Organization Scanner</text>
    
    <circle cx="25" cy="80" r="8" fill="#ea4335"/>
    <text x="40" y="84" fill="#5f6368" font-family="Arial" font-size="10">Circuit Breaker</text>
    
    <circle cx="165" cy="40" r="8" fill="#fbbc04"/>
    <text x="180" y="44" fill="#5f6368" font-family="Arial" font-size="10">Budget Monitor</text>
    
    <circle cx="165" cy="60" r="8" fill="#9334e6"/>
    <text x="180" y="64" fill="#5f6368" font-family="Arial" font-size="10">Anomaly Detector</text>
    
    <circle cx="165" cy="80" r="8" fill="#00897b"/>
    <text x="180" y="84" fill="#5f6368" font-family="Arial" font-size="10">Real-time Tracker</text>
  </g>
  
  <!-- Key Features -->
  <g transform="translate(390, 810)">
    <rect width="300" height="100" rx="6" fill="#f8f9fa" stroke="#dadce0"/>
    <text x="10" y="20" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Key Features</text>
    
    <text x="15" y="40" fill="#5f6368" font-family="Arial" font-size="10">‚úì Resource Manager + Service Usage APIs</text>
    <text x="15" y="55" fill="#5f6368" font-family="Arial" font-size="10">‚úì Multi-threshold circuit breaker</text>
    <text x="15" y="70" fill="#5f6368" font-family="Arial" font-size="10">‚úì Forecasted spend alerts</text>
    <text x="15" y="85" fill="#5f6368" font-family="Arial" font-size="10">‚úì Real-time resource tracking</text>
  </g>
  
  <!-- Protection Levels -->
  <g transform="translate(710, 810)">
    <rect width="300" height="100" rx="6" fill="#f8f9fa" stroke="#dadce0"/>
    <text x="10" y="20" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Protection Levels</text>
    
    <rect x="15" y="30" width="70" height="16" rx="3" fill="#e8f5e9"/>
    <text x="50" y="42" text-anchor="middle" fill="#2e7d32" font-family="Arial" font-size="9">WARNING</text>
    <text x="95" y="42" fill="#5f6368" font-family="Arial" font-size="9">$1K ‚Äî Alert only</text>
    
    <rect x="15" y="50" width="70" height="16" rx="3" fill="#fff3e0"/>
    <text x="50" y="62" text-anchor="middle" fill="#e65100" font-family="Arial" font-size="9">ELEVATED</text>
    <text x="95" y="62" fill="#5f6368" font-family="Arial" font-size="9">$2.5K ‚Äî Alert only</text>
    
    <rect x="15" y="70" width="70" height="16" rx="3" fill="#ffebee"/>
    <text x="50" y="82" text-anchor="middle" fill="#c62828" font-family="Arial" font-size="9">CRITICAL</text>
    <text x="95" y="82" fill="#5f6368" font-family="Arial" font-size="9">$5K ‚Äî Stop resources</text>
    
    <rect x="175" y="30" width="70" height="16" rx="3" fill="#b71c1c"/>
    <text x="210" y="42" text-anchor="middle" fill="white" font-family="Arial" font-size="9">EMERGENCY</text>
    <text x="175" y="62" fill="#5f6368" font-family="Arial" font-size="9">$10K ‚Äî Disable billing</text>
  </g>
  
  <!-- Data Flow -->
  <g transform="translate(1030, 810)">
    <rect width="300" height="100" rx="6" fill="#f8f9fa" stroke="#dadce0"/>
    <text x="10" y="20" fill="#202124" font-family="Arial" font-size="11" font-weight="600">Data Flow</text>
    
    <line x1="20" y1="40" x2="60" y2="40" stroke="#34a853" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="70" y="44" fill="#5f6368" font-family="Arial" font-size="10">User query ‚Üí Intent</text>
    
    <line x1="20" y1="60" x2="60" y2="60" stroke="#1a73e8" stroke-width="2" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
    <text x="70" y="64" fill="#5f6368" font-family="Arial" font-size="10">MCP ‚Üí API calls</text>
    
    <line x1="20" y1="80" x2="60" y2="80" stroke="#ea4335" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="70" y="84" fill="#5f6368" font-family="Arial" font-size="10">Circuit breaker ‚Üí Actions</text>
  </g>
  
  <!-- Footer -->
  <text x="700" y="950" text-anchor="middle" fill="#5f6368" font-family="Arial" font-size="11">
    GCP Cost Monitoring Agent ‚Äî Method 1: Resource Manager API + Service Usage API
  </text>
  <text x="700" y="970" text-anchor="middle" fill="#80868b" font-family="Arial" font-size="10">
    Designed for SMB cloud cost optimization ($50K-$500K monthly spend)
  </text>
  
</svg>
