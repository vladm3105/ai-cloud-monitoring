# ===========================
# GCP Project Configuration
# ===========================

# Your GCP Project ID
GCP_PROJECT_ID=ai-cost-monitoring
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# ===========================
# Deployment Mode
# ===========================

# Single-tenant (default) or multi-tenant mode
TENANT_MODE=single  # single or multi

# Default tenant ID (generated during setup, not hardcoded)
# For single-tenant mode: Random UUID created during installation
# For multi-tenant mode: Ignored (tenants created via API)
DEFAULT_TENANT_ID=  # e.g., a7f3c8d9-4e2b-4a91-8c3f-9d7e6f5a4b3c

# Multi-tenant feature flags (only relevant if TENANT_MODE=multi)
ENABLE_TENANT_REGISTRATION=false  # Allow new tenant sign-up
ENABLE_TENANT_SELECTOR_UI=false   # Show tenant selector in UI

# ===========================
# Database Configuration
# ===========================

# Cloud SQL PostgreSQL
DATABASE_HOST=10.0.0.3  # Private IP of Cloud SQL instance
DATABASE_PORT=5432
DATABASE_NAME=ai_cost_monitoring
DATABASE_USER=postgres
DATABASE_PASSWORD=  # Store in Secret Manager: ai-cost-monitoring/database-password

# Database URL (constructed from above)
DATABASE_URL=postgresql://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}

# ===========================
# Cache Configuration
# ===========================

# Cloud Memorystore Redis
REDIS_HOST=10.0.0.4  # Private IP of Redis instance
REDIS_PORT=6379
REDIS_PASSWORD=  # Store in Secret Manager: ai-cost-monitoring/redis-auth
REDIS_DB=0
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ===========================
# Authentication (Auth0)
# ===========================

AUTH0_DOMAIN=your-tenant.us.auth0.com
AUTH0_CLIENT_ID=  # Store in Secret Manager: ai-cost-monitoring/auth0-client-id
AUTH0_CLIENT_SECRET=  # Store in Secret Manager: ai-cost-monitoring/auth0-client-secret
AUTH0_AUDIENCE=https://api.ai-cost-monitoring.com
AUTH0_CALLBACK_URL=https://ai-cost-monitoring.com/api/auth/callback

# ===========================
# Application URLs
# ===========================

# Frontend (Cloud Run)
FRONTEND_URL=https://ai-cost-monitoring-frontend-abc123-uc.a.run.app
# Backend (Cloud Run)
BACKEND_URL=https://ai-cost-monitoring-backend-xyz789-uc.a.run.app
# MCP Server (Cloud Run)
MCP_SERVER_URL=https://gcp-cost-mcp-server-def456-uc.a.run.app

# ===========================
# Google Cloud APIs
# ===========================

# Service Account for Cloud Run
GCP_SERVICE_ACCOUNT=ai-cost-monitoring-sa@ai-cost-monitoring.iam.gserviceaccount.com

# BigQuery for billing data
BIGQUERY_DATASET=cloud_costs
BIGQUERY_TABLE=cost_metrics

# ===========================
# Agent Configuration
# ===========================

# Google ADK
GOOGLE_API_KEY=  # Store in Secret Manager: ai-cost-monitoring/google-api-key
GEMINI_MODEL=gemini-2.0-flash-exp

# Alternative: Claude
ANTHROPIC_API_KEY=  # Store in Secret Manager: ai-cost-monitoring/anthropic-api-key
CLAUDE_MODEL=claude-3-5-sonnet-20241022

# ===========================
# MCP Server Configuration
# ===========================
# See ADR-001: Use MCP Servers Instead of REST APIs

# Cloud Provider MCP Servers
MCP_AWS_PORT=8082
MCP_AZURE_PORT=8083
MCP_GCP_PORT=8084
MCP_KUBERNETES_PORT=8085

# Shared MCP Servers
MCP_FORECAST_PORT=8086
MCP_REMEDIATION_PORT=8087
MCP_POLICY_PORT=8088
MCP_TENANT_PORT=8089

# ===========================
# Agent Registration (ADR-009, ADR-010)
# ===========================
# Agents self-register via AgentCard on startup
# No manual registration configuration needed

# ===========================
# Application Settings
# ===========================

# Environment
ENVIRONMENT=production  # or development, staging
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR

# Security
SECRET_KEY=  # Generate with: openssl rand -hex 32
CORS_ORIGINS=https://ai-cost-monitoring.com,https://app.ai-cost-monitoring.com

# Session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax

# ===========================
# Background Jobs (Cloud Tasks)
# ===========================
# Note: Celery replaced with Cloud Tasks per ADR-006

CLOUD_TASKS_QUEUE=cost-sync
CLOUD_TASKS_LOCATION=${GCP_REGION}
# Cloud Scheduler handles cron - no additional config needed

# ===========================
# Monitoring & Observability
# ===========================

# Cloud Monitoring
GOOGLE_CLOUD_PROJECT=${GCP_PROJECT_ID}

# Sentry (Optional)
SENTRY_DSN=  # Your Sentry DSN for error tracking

# ===========================
# Feature Flags
# ===========================

ENABLE_A2A_GATEWAY=false  # Enable in Phase 6
ENABLE_AUTO_REMEDIATION=false  # Requires approval workflows

# ===========================
# Cost Alerts
# ===========================

BUDGET_ALERT_THRESHOLD_1=0.5  # Alert at 50% of budget
BUDGET_ALERT_THRESHOLD_2=0.8  # Alert at 80% of budget
BUDGET_ALERT_THRESHOLD_3=1.0  # Alert at 100% of budget

ALERT_EMAIL=alerts@your-org.com
ALERT_SLACK_WEBHOOK=  # Store in Secret Manager: ai-cost-monitoring/slack-webhook

# ===========================
# Rate Limiting
# ===========================

RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
A2A_RATE_LIMIT_PER_MINUTE=10
