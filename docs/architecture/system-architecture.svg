<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 900">
  <!-- Style Definitions -->
  <defs>
    <style>
      .bg { fill: #f8f9fa; }
      .cluster-box { fill: #ffffff; stroke: #dfe1e5; stroke-width: 2; rx: 8; ry: 8; }
      .cluster-title { font-family: 'Google Sans', Arial, sans-serif; font-weight: bold; font-size: 16px; fill: #5f6368; }
      .node-box { fill: #e8f0fe; stroke: #4285f4; stroke-width: 2; rx: 6; ry: 6; }
      .node-title { font-family: 'Google Sans', Arial, sans-serif; font-weight: bold; font-size: 14px; fill: #1967d2; text-anchor: middle; }
      .node-desc { font-family: Arial, sans-serif; font-size: 11px; fill: #3c4043; text-anchor: middle; }
      .db-box { fill: #e6f4ea; stroke: #34a853; stroke-width: 2; rx: 6; ry: 6; }
      .db-title { fill: #137333; }
      .cloud-box { fill: #fce8e6; stroke: #ea4335; stroke-width: 2; rx: 6; ry: 6; }
      .cloud-title { fill: #c5221f; }
      .arrow { stroke: #5f6368; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .dashed-arrow { stroke: #9aa0a6; stroke-width: 2; fill: none; stroke-dasharray: 4 2; marker-end: url(#arrowhead); }
      text { font-family: 'Google Sans', Arial, sans-serif; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#5f6368" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="100%" height="100%" class="bg" />

  <!-- Main Title -->
  <text x="600" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#202124">AI Cost Monitoring Platform - System Architecture</text>
  <text x="600" y="65" text-anchor="middle" font-size="14" fill="#5f6368">Cloud-Agnostic, Serverless, AI-Powered FinOps</text>

  <!-- User Layer -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="1100" height="150" class="cluster-box" />
    <text x="20" y="30" class="cluster-title">User Interface Layer</text>

    <!-- Grafana Node -->
    <g transform="translate(150, 60)">
      <rect x="0" y="0" width="180" height="60" class="node-box" style="stroke: #fbbc04; fill: #fef7e0;" />
      <text x="90" y="25" class="node-title" style="fill: #b06000;">Grafana Dashboards</text>
      <text x="90" y="45" class="node-desc">Visual Monitoring & Alerts</text>
    </g>

    <!-- AG-UI Node -->
    <g transform="translate(770, 60)">
      <rect x="0" y="0" width="180" height="60" class="node-box" />
      <text x="90" y="25" class="node-title">AG-UI Chat Interface</text>
      <text x="90" y="45" class="node-desc">Conversational AI Analysis</text>
    </g>
  </g>

  <!-- App Layer -->
  <g transform="translate(50, 300)">
    <rect x="0" y="0" width="1100" height="250" class="cluster-box" style="fill: #f1f3f4;" />
    <text x="20" y="30" class="cluster-title">Application Layer (Cloud Run / Serverless)</text>

    <!-- Backend API -->
    <g transform="translate(460, 60)">
      <rect x="0" y="0" width="180" height="80" class="node-box" />
      <text x="90" y="25" class="node-title">Unified API Gateway</text>
      <text x="90" y="45" class="node-desc">FastAPI / Python</text>
      <text x="90" y="65" class="node-desc">Auth0, Rate Limiting</text>
    </g>

    <!-- Agents -->
    <g transform="translate(150, 100)">
      <rect x="0" y="0" width="200" height="100" class="node-box" style="stroke: #a142f4; fill: #f3e8fd;" />
      <text x="100" y="25" class="node-title" style="fill: #6002ee;">AI Agent Coordinator</text>
      <text x="100" y="45" class="node-desc">Google ADK / LiteLLM</text>
      <line x1="10" y1="55" x2="190" y2="55" stroke="#a142f4" stroke-width="1" />
      <text x="100" y="75" class="node-desc">Query Routing â€¢ Context</text>
      <text x="100" y="90" class="node-desc">Intent Classification</text>
    </g>

    <!-- MCP Servers -->
    <g transform="translate(750, 60)">
      <rect x="0" y="0" width="220" height="160" class="cluster-box" />
      <text x="110" y="25" class="cluster-title" text-anchor="middle" font-size="14">MCP Server Layer</text>
      
      <g transform="translate(20, 40)">
        <rect x="0" y="0" width="180" height="30" class="node-box" />
        <text x="90" y="20" class="node-title" font-size="12">GCP Cost MCP</text>
      </g>
      <g transform="translate(20, 80)">
        <rect x="0" y="0" width="180" height="30" class="cloud-box" style="stroke: #fbbc04; fill: #fef7e0;" />
        <text x="90" y="20" class="node-title" font-size="12" style="fill: #b06000;">AWS Cost MCP</text>
      </g>
      <g transform="translate(20, 120)">
        <rect x="0" y="0" width="180" height="30" class="cloud-box" style="stroke: #0078d4; fill: #deecf9;" />
        <text x="90" y="20" class="node-title" font-size="12" style="fill: #005a9e;">Azure Cost MCP</text>
      </g>
    </g>
  </g>

  <!-- Data Layer -->
  <g transform="translate(50, 600)">
    <rect x="0" y="0" width="1100" height="150" class="cluster-box" />
    <text x="20" y="30" class="cluster-title">Data & Infrastructure Layer</text>

    <!-- Database -->
    <g transform="translate(150, 50)">
      <rect x="0" y="0" width="180" height="70" class="db-box" />
      <text x="90" y="25" class="node-title db-title">BigQuery</text>
      <text x="90" y="45" class="node-desc">Cost Analytics Engine</text>
      <text x="90" y="60" class="node-desc">(or Athena/Synapse)</text>
    </g>

    <!-- PostgreSQL -->
    <g transform="translate(460, 50)">
      <rect x="0" y="0" width="180" height="70" class="db-box" style="stroke: #0078d4; fill: #deecf9;" />
      <text x="90" y="25" class="node-title" style="fill: #005a9e;">Cloud SQL (PostgreSQL)</text>
      <text x="90" y="45" class="node-desc">Metadata, Users, Tenants</text>
    </g>

    <!-- Cloud Tasks -->
    <g transform="translate(770, 50)">
      <rect x="0" y="0" width="180" height="70" class="node-box" style="stroke: #ea4335; fill: #fce8e6;" />
      <text x="90" y="25" class="node-title" style="fill: #c5221f;">Cloud Tasks</text>
      <text x="90" y="45" class="node-desc">Async Job Queue</text>
    </g>
  </g>

  <!-- External Clouds -->
  <g transform="translate(50, 800)">
    <!-- GCP -->
    <g transform="translate(150, 0)">
      <rect x="0" y="0" width="180" height="50" class="cloud-box" style="stroke: #34a853; fill: #e6f4ea;" />
      <text x="90" y="30" class="node-title" style="fill: #137333;">Google Cloud</text>
    </g>
    
    <!-- AWS -->
    <g transform="translate(460, 0)">
      <rect x="0" y="0" width="180" height="50" class="cloud-box" style="stroke: #fbbc04; fill: #fef7e0;" />
      <text x="90" y="30" class="node-title" style="fill: #b06000;">AWS</text>
    </g>

    <!-- Azure -->
    <g transform="translate(770, 0)">
      <rect x="0" y="0" width="180" height="50" class="cloud-box" style="stroke: #0078d4; fill: #deecf9;" />
      <text x="90" y="30" class="node-title" style="fill: #005a9e;">Azure</text>
    </g>
  </g>

  <!-- Connections -->
  <!-- User to App -->
  <path d="M 290 220 L 290 320 L 580 320 L 580 360" class="arrow" /> <!-- Grafana to API -->
  <path d="M 910 220 L 910 320 L 620 320 L 620 360" class="arrow" /> <!-- AG-UI to API -->
  
  <!-- App Layer Inter-connects -->
  <path d="M 510 420 L 400 420" class="arrow" /> <!-- API to Agents -->
  <path d="M 690 400 L 800 400" class="arrow" /> <!-- API to MCP -->

  <!-- App to Data -->
  <path d="M 300 500 L 300 650" class="arrow" /> <!-- Agent to BigQuery -->
  <path d="M 600 440 L 600 650" class="arrow" /> <!-- API to SQL -->
  <path d="M 910 520 L 910 650" class="arrow" /> <!-- MCP to Tasks -->

  <!-- Data Integration -->
  <path d="M 330 685 L 460 685" class="dashed-arrow" /> <!-- BigQuery <-> SQL Link -->

  <!-- Cloud Billing Data Flow -->
  <path d="M 290 800 L 290 720" class="dashed-arrow" /> <!-- GCP Data -->
  <path d="M 600 800 L 600 760 L 310 760 L 310 720" class="dashed-arrow" /> <!-- AWS Data -->
  <path d="M 910 800 L 910 770 L 330 770 L 330 720" class="dashed-arrow" /> <!-- Azure Data -->
</svg>
